/*!
* Jasny-Bootstrap.js j2 by @ArnoldDaniels
* Copyright 2012 Jasny BV.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(c){var a=window.orientation!==undefined,d=navigator.userAgent.toLowerCase().indexOf("android")>-1;c.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","?":"[A-Za-z0-9]","*":"."},dataName:"rawMaskFn"};var b=function(e,f){if(d){return}this.$element=c(e),this.mask=String(f.mask),this.options=c.extend({},c.fn.inputmask.defaults,f),this.init(),this.listen(),this.checkVal()};b.prototype={init:function(){var e=c.mask.definitions,f=this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,c.each(this.mask.split(""),c.proxy(function(h,g){g=="?"?(f--,this.partialPosition=h):e[g]?(this.tests.push(new RegExp(e[g])),this.firstNonMaskPos===null&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=c.map(this.mask.split(""),c.proxy(function(g,h){if(g!="?"){return e[g]?this.options.placeholder:g}},this)),this.focusText=this.$element.val(),this.$element.data(c.mask.dataName,c.proxy(function(){return c.map(this.buffer,function(h,g){return this.tests[g]&&h!=this.options.placeholder?h:null}).join("")},this))},listen:function(){if(this.$element.attr("readonly")){return}var e=(c.browser.msie?"paste":"input")+".mask";this.$element.on("unmask",c.proxy(this.unmask,this)).on("focus.mask",c.proxy(this.focusEvent,this)).on("blur.mask",c.proxy(this.blurEvent,this)).on("keydown.mask",c.proxy(this.keydownEvent,this)).on("keypress.mask",c.proxy(this.keypressEvent,this)).on(e,c.proxy(this.pasteEvent,this))},caret:function(g,f){if(this.$element.length===0){return}if(typeof g=="number"){return f=typeof f=="number"?f:g,this.$element.each(function(){if(this.setSelectionRange){this.setSelectionRange(g,f)}else{if(this.createTextRange){var e=this.createTextRange();e.collapse(!0),e.moveEnd("character",f),e.moveStart("character",g),e.select()}}})}if(this.$element[0].setSelectionRange){g=this.$element[0].selectionStart,f=this.$element[0].selectionEnd}else{if(document.selection&&document.selection.createRange){var h=document.selection.createRange();g=0-h.duplicate().moveStart("character",-100000),f=g+h.text.length}}return{begin:g,end:f}},seekNext:function(g){var f=this.mask.length;while(++g<=f&&!this.tests[g]){}return g},seekPrev:function(f){while(--f>=0&&!this.tests[f]){}return f},shiftL:function(j,g){var k=this.mask.length;if(j<0){return}for(var h=j,f=this.seekNext(g);h<k;h++){if(this.tests[h]){if(!(f<k&&this.tests[h].test(this.buffer[f]))){break}this.buffer[h]=this.buffer[f],this.buffer[f]=this.options.placeholder,f=this.seekNext(f)}}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,j))},shiftR:function(k){var g=this.mask.length;for(var l=k,j=this.options.placeholder;l<g;l++){if(this.tests[l]){var f=this.seekNext(l),h=this.buffer[l];this.buffer[l]=j;if(!(f<g&&this.tests[f].test(h))){break}j=h}}},unmask:function(){this.$element.unbind(".mask").removeData("inputmask")},focusEvent:function(){this.focusText=this.$element.val();var f=this.mask.length,h=this.checkVal();this.writeBuffer();var g=this,e=function(){h==f?g.caret(0,h):g.caret(h)};c.browser.msie?e():setTimeout(e,0)},blurEvent:function(){this.checkVal(),this.$element.val()!=this.focusText&&this.$element.trigger("change")},keydownEvent:function(j){var k=j.which;if(k==8||k==46||a&&k==127){var h=this.caret(),f=h.begin,g=h.end;return g-f===0&&(f=k!=46?this.seekPrev(f):g=this.seekNext(f-1),g=k==46?this.seekNext(g):g),this.clearBuffer(f,g),this.shiftL(f,g-1),!1}if(k==27){return this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1}},keypressEvent:function(k){var g=this.mask.length,m=k.which,j=this.caret();if(k.ctrlKey||k.altKey||k.metaKey||m<32){return !0}if(m){j.end-j.begin!==0&&(this.clearBuffer(j.begin,j.end),this.shiftL(j.begin,j.end-1));var f=this.seekNext(j.begin-1);if(f<g){var h=String.fromCharCode(m);if(this.tests[f].test(h)){this.shiftR(f),this.buffer[f]=h,this.writeBuffer();var l=this.seekNext(f);this.caret(l)}}return !1}},pasteEvent:function(){var f=this;setTimeout(function(){f.caret(f.checkVal(!0))},0)},clearBuffer:function(h,f){var i=this.mask.length;for(var g=h;g<f&&g<i;g++){this.tests[g]&&(this.buffer[g]=this.options.placeholder)}},writeBuffer:function(){return this.$element.val(this.buffer.join("")).val()},checkVal:function(k){var g=this.mask.length,m=this.$element.val(),j=-1;for(var f=0,h=0;f<g;f++){if(this.tests[f]){this.buffer[f]=this.options.placeholder;while(h++<m.length){var l=m.charAt(h-1);if(this.tests[f].test(l)){this.buffer[f]=l,j=f;break}}if(h>m.length){break}}else{this.buffer[f]==m.charAt(h)&&f!=this.partialPosition&&(h++,j=f)}}if(!k&&j+1<this.partialPosition){this.$element.val(""),this.clearBuffer(0,g)}else{if(k||j+1>=this.partialPosition){this.writeBuffer(),k||this.$element.val(this.$element.val().substring(0,j+1))}}return this.partialPosition?f:this.firstNonMaskPos}},c.fn.inputmask=function(e){return this.each(function(){var g=c(this),f=g.data("inputmask");f||g.data("inputmask",f=new b(this,e))})},c.fn.inputmask.defaults={placeholder:"_"},c.fn.inputmask.Constructor=b,c(function(){c("body").on("focus.inputmask.data-api","[data-mask]",function(e){var f=c(this);if(f.data("inputmask")){return}e.preventDefault(),f.inputmask(f.data())})})}(window.jQuery),!function(b){var a=function(c,e){e=b.extend({},b.fn.rowlink.defaults,e);var d=c.nodeName=="tr"?b(c):b(c).find("tr:has(td)");d.each(function(){var f=b(this).find(e.target).first();if(!f.length){return}var g=f.attr("href");b(this).find("td").not(".nolink").click(function(){window.location=g}),b(this).addClass("rowlink"),f.replaceWith(f.html())})};b.fn.rowlink=function(c){return this.each(function(){var e=b(this),d=e.data("rowlink");d||e.data("rowlink",d=new a(this,c))})},b.fn.rowlink.defaults={target:"a"},b.fn.rowlink.Constructor=a,b(function(){b('[data-provides="rowlink"]').each(function(){b(this).rowlink(b(this).data())})})}(window.jQuery),!function(b){var a=function(c,e){this.$element=b(c),this.type=this.$element.data("uploadtype")||(this.$element.find(".thumbnail").length>0?"image":"file"),this.$input=this.$element.find(":file");if(this.$input.length===0){return}this.name=this.$input.attr("name")||e.name,this.$hidden=this.$element.find(':hidden[name="'+this.name+'"]'),this.$hidden.length===0&&(this.$hidden=b('<input type="hidden" />'),this.$element.prepend(this.$hidden)),this.$preview=this.$element.find(".fileupload-preview");var d=this.$preview.css("height");this.$preview.css("display")!="inline"&&d!="0px"&&d!="none"&&this.$preview.css("line-height",d),this.$remove=this.$element.find('[data-dismiss="fileupload"]'),this.$element.find('[data-trigger="fileupload"]').on("click.fileupload",b.proxy(this.trigger,this)),this.listen()};a.prototype={listen:function(){this.$input.on("change.fileupload",b.proxy(this.change,this)),this.$remove&&this.$remove.on("click.fileupload",b.proxy(this.clear,this))},change:function(h,d){var j=h.target.files!==undefined?h.target.files[0]:h.target.value?{name:h.target.value.replace(/^.+\\/,"")}:null;if(d==="clear"){return}if(!j){this.clear();return}this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);if(this.type==="image"&&this.$preview.length>0&&(typeof j.type!="undefined"?j.type.match("image.*"):j.name.match("\\.(gif|png|jpe?g)$"))&&typeof FileReader!="undefined"){var g=new FileReader,c=this.$preview,f=this.$element;g.onload=function(i){c.html('<img src="'+i.target.result+'" '+(c.css("max-height")!="none"?'style="max-height: '+c.css("max-height")+';"':"")+" />"),f.addClass("fileupload-exists").removeClass("fileupload-new")},g.readAsDataURL(j)}else{this.$preview.text(j.name),this.$element.addClass("fileupload-exists").removeClass("fileupload-new")}},clear:function(c){this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),this.$input.val(""),this.$preview.html(""),this.$element.addClass("fileupload-new").removeClass("fileupload-exists"),c&&(this.$input.trigger("change",["clear"]),c.preventDefault())},trigger:function(c){this.$input.trigger("click"),c.preventDefault()}},b.fn.fileupload=function(c){return this.each(function(){var e=b(this),d=e.data("fileupload");d||e.data("fileupload",d=new a(this,c))})},b.fn.fileupload.Constructor=a,b(function(){b("body").on("click.fileupload.data-api",'[data-provides="fileupload"]',function(c){var e=b(this);if(e.data("fileupload")){return}e.fileupload(e.data());var d=b(c.target).parents("[data-dismiss=fileupload],[data-trigger=fileupload]").first();d.length>0&&(d.trigger("click.fileupload"),c.preventDefault())})})}(window.jQuery);