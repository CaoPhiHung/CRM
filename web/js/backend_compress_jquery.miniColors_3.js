if(jQuery){(function(f){f.minicolors={settings:{defaultSlider:"hue",letterCase:"lowercase",hideSpeed:100,showSpeed:100,animationSpeed:100,animationEasing:"swing"},init:function(){f("INPUT[data-type=minicolors]").each(function(){n(f(this))})},remove:function(s){f(s).each(function(){r(f(this))})},refresh:function(){f("INPUT[data-type=minicolors]").each(function(){d(f(this))})},show:function(s){q(f(s).eq(0))},hide:function(){i()},rgbObject:function(s){var v=o(f(s).val(),true),u=l(v),t=s.attr("data-opacity");if(!u){return null}if(t!==undefined){f.extend(u,{a:parseFloat(t)})}return u},rgbString:function(s){var v=o(f(s).val(),true),u=l(v),t=s.attr("data-opacity");if(!u){return null}if(t===undefined){return"rgb("+u.r+", "+u.g+", "+u.b+")"}else{return"rgba("+u.r+", "+u.g+", "+u.b+", "+parseFloat(t)+")"}}};function n(s){var u=f('<span class="minicolors" />'),t=s.attr("data-slider")||f.minicolors.settings.defaultSlider;if(s.data("initialized")){return}u.attr("class",s.attr("data-class")).attr("style",s.attr("data-style")).toggleClass("minicolors-swatch-left",s.attr("data-swatch-position")==="left").toggleClass("minicolors-with-opacity",s.attr("data-opacity")!==undefined);if(s.attr("data-position")!==undefined){f.each(s.attr("data-position").split(" "),function(){u.addClass("minicolors-position-"+this)})}s.data("initialized",true).attr("data-default",s.attr("data-default")||"").attr("data-slider",t).prop("size",7).prop("maxlength",7).wrap(u).after('<span class="minicolors-panel minicolors-slider-'+t+'"><span class="minicolors-slider"><span class="minicolors-picker"></span></span><span class="minicolors-opacity-slider"><span class="minicolors-picker"></span></span><span class="minicolors-grid"><span class="minicolors-grid-inner"></span><span class="minicolors-picker"><span></span></span></span></span>');s.parent().find(".minicolors-panel").on("selectstart",function(){return false}).end();if(s.attr("data-swatch-position")==="left"){s.before('<span class="minicolors-swatch"><span></span></span>')}else{s.after('<span class="minicolors-swatch"><span></span></span>')}if(s.attr("data-textfield")==="false"){s.addClass("minicolors-hidden")}if(s.attr("data-control")==="inline"){s.parent().addClass("minicolors-inline")}b(s)}function d(s){b(s)}function r(s){var t=s.parent();if(s.data("initialized")&&t.hasClass("minicolors")){t.remove()}}function q(t){var u=t.parent(),s=u.find(".minicolors-panel");if(!t.data("initialized")||t.prop("disabled")||u.hasClass("minicolors-focus")){return}i();u.addClass("minicolors-focus");s.stop(true,true).fadeIn(f.minicolors.settings.showSpeed)}function i(){f(".minicolors:not(.minicolors-inline)").each(function(){var t=f(this),s=t.find("INPUT");t.find(".minicolors-panel").fadeOut(f.minicolors.settings.hideSpeed,function(){t.removeClass("minicolors-focus")})})}function m(E,t,u){var G=E.parents(".minicolors").find("INPUT"),C=E.find("[class$=-picker]"),B=E.offset().left,A=E.offset().top,H=Math.round(t.pageX-B),F=Math.round(t.pageY-A),w=u?f.minicolors.settings.animationSpeed:0,z,v,s,D;if(t.originalEvent.changedTouches){H=t.originalEvent.changedTouches[0].pageX-B;F=t.originalEvent.changedTouches[0].pageY-A}if(H<0){H=0}if(F<0){F=0}if(H>E.width()){H=E.width()}if(F>E.height()){F=E.height()}if(E.parent().is(".minicolors-slider-wheel")&&C.parent().is(".minicolors-grid")){z=75-H;v=75-F;s=Math.sqrt(z*z+v*v);D=Math.atan2(v,z);if(D<0){D+=Math.PI*2}if(s>75){s=75;H=75-(75*Math.cos(D));F=75-(75*Math.sin(D))}H=Math.round(H);F=Math.round(F)}if(E.is(".minicolors-grid")){C.stop(true).animate({top:F+"px",left:H+"px"},w,f.minicolors.settings.animationEasing,function(){h(G)})}else{C.stop(true).animate({top:F+"px"},w,f.minicolors.settings.animationEasing,function(){h(G)})}}function h(N){function S(y,x){var V,U;if(!y.length||!x){return null}V=y.offset().left;U=y.offset().top;return{x:V-x.offset().left+(y.outerWidth()/2),y:U-x.offset().top+(y.outerHeight()/2)}}var D,E,T,B,t,H,L,K,P,A,C=N.parent(),O=C.find(".minicolors-panel"),Q=C.find(".minicolors-swatch"),I=N.attr("data-opacity")!==undefined,v=N.attr("data-slider"),s=C.find(".minicolors-grid"),R=C.find(".minicolors-slider"),G=C.find(".minicolors-opacity-slider"),F=s.find("[class$=-picker]"),M=R.find("[class$=-picker]"),z=G.find("[class$=-picker]"),w=S(F,s),u=S(M,R),J=S(z,G);switch(v){case"wheel":L=(s.width()/2)-w.x;K=(s.height()/2)-w.y;P=Math.sqrt(L*L+K*K);A=Math.atan2(K,L);if(A<0){A+=Math.PI*2}if(P>75){P=75;w.x=69-(75*Math.cos(A));w.y=69-(75*Math.sin(A))}E=k(P/0.75,0,100);D=k(A*180/Math.PI,0,360);T=k(100-Math.floor(u.y*(100/R.height())),0,100);H=c({h:D,s:E,b:T});R.css("backgroundColor",c({h:D,s:E,b:100}));break;case"saturation":D=k(parseInt(w.x*(360/s.width())),0,360);E=k(100-Math.floor(u.y*(100/R.height())),0,100);T=k(100-Math.floor(w.y*(100/s.height())),0,100);H=c({h:D,s:E,b:T});R.css("backgroundColor",c({h:D,s:100,b:T}));C.find(".minicolors-grid-inner").css("opacity",E/100);break;case"brightness":D=k(parseInt(w.x*(360/s.width())),0,360);E=k(100-Math.floor(w.y*(100/s.height())),0,100);T=k(100-Math.floor(u.y*(100/R.height())),0,100);H=c({h:D,s:E,b:T});R.css("backgroundColor",c({h:D,s:E,b:100}));C.find(".minicolors-grid-inner").css("opacity",1-(T/100));break;default:D=k(360-parseInt(u.y*(360/R.height())),0,360);E=k(Math.floor(w.x*(100/s.width())),0,100);T=k(100-Math.floor(w.y*(100/s.height())),0,100);H=c({h:D,s:E,b:T});s.css("backgroundColor",c({h:D,s:100,b:100}));break}if(I){B=parseFloat(1-(J.y/G.height())).toFixed(2)}else{B=1}N.val(H);if(I){N.attr("data-opacity",B)}Q.find("SPAN").css({backgroundColor:H,opacity:B});if(H+B!==N.data("last-change")){N.data("last-change",H+B).trigger("change",N)}}function b(H,I){var B,K,w,F,E,J,v,z=H.parent(),L=z.find(".minicolors-swatch"),C=H.attr("data-opacity")!==undefined,t=H.attr("data-slider"),s=z.find(".minicolors-grid"),M=z.find(".minicolors-slider"),D=z.find(".minicolors-opacity-slider"),A=s.find("[class$=-picker]"),G=M.find("[class$=-picker]"),u=D.find("[class$=-picker]");B=j(o(H.val(),true));if(!B){B=j(o(H.attr("data-default"),true))}K=e(B);if(!I){H.val(B)}if(C){w=H.attr("data-opacity")===""?1:k(parseFloat(H.attr("data-opacity")).toFixed(2),0,1);H.attr("data-opacity",w);L.find("SPAN").css("opacity",w);E=k(D.height()-(D.height()*w),0,D.height());u.css("top",E+"px")}L.find("SPAN").css("backgroundColor",B);switch(t){case"wheel":J=k(Math.ceil(K.s*0.75),0,s.height()/2);v=K.h*Math.PI/180;F=k(75-Math.cos(v)*J,0,s.width());E=k(75-Math.sin(v)*J,0,s.height());A.css({top:E+"px",left:F+"px"});E=150-(K.b/(100/s.height()));if(B===""){E=0}G.css("top",E+"px");M.css("backgroundColor",c({h:K.h,s:K.s,b:100}));break;case"saturation":F=k((5*K.h)/12,0,150);E=k(s.height()-Math.ceil(K.b/(100/s.height())),0,s.height());A.css({top:E+"px",left:F+"px"});E=k(M.height()-(K.s*(M.height()/100)),0,M.height());G.css("top",E+"px");M.css("backgroundColor",c({h:K.h,s:100,b:K.b}));z.find(".minicolors-grid-inner").css("opacity",K.s/100);break;case"brightness":F=k((5*K.h)/12,0,150);E=k(s.height()-Math.ceil(K.s/(100/s.height())),0,s.height());A.css({top:E+"px",left:F+"px"});E=k(M.height()-(K.b*(M.height()/100)),0,M.height());G.css("top",E+"px");M.css("backgroundColor",c({h:K.h,s:K.s,b:100}));z.find(".minicolors-grid-inner").css("opacity",1-(K.b/100));break;default:F=k(Math.ceil(K.s/(100/s.width())),0,s.width());E=k(s.height()-Math.ceil(K.b/(100/s.height())),0,s.height());A.css({top:E+"px",left:F+"px"});E=k(M.height()-(K.h/(360/M.height())),0,M.height());G.css("top",E+"px");s.css("backgroundColor",c({h:K.h,s:100,b:100}));break}}function j(s){return f.minicolors.settings.letterCase==="uppercase"?s.toUpperCase():s.toLowerCase()}function o(s,t){s=s.replace(/[^A-F0-9]/ig,"");if(s.length!==3&&s.length!==6){return""}if(s.length===3&&t){s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]}return"#"+s}function k(u,t,s){if(u<t){u=t}if(u>s){u=s}return u}function p(t){var w={};var A=Math.round(t.h);var z=Math.round(t.s*255/100);var u=Math.round(t.b*255/100);if(z===0){w.r=w.g=w.b=u}else{var B=u;var y=(255-z)*u/255;var x=(B-y)*(A%60)/60;if(A===360){A=0}if(A<60){w.r=B;w.b=y;w.g=y+x}else{if(A<120){w.g=B;w.b=y;w.r=B-x}else{if(A<180){w.g=B;w.r=y;w.b=y+x}else{if(A<240){w.b=B;w.r=y;w.g=B-x}else{if(A<300){w.b=B;w.g=y;w.r=y+x}else{if(A<360){w.r=B;w.g=y;w.b=B-x}else{w.r=0;w.g=0;w.b=0}}}}}}}return{r:Math.round(w.r),g:Math.round(w.g),b:Math.round(w.b)}}function a(s){var t=[s.r.toString(16),s.g.toString(16),s.b.toString(16)];f.each(t,function(u,v){if(v.length===1){t[u]="0"+v}});return"#"+t.join("")}function c(s){return a(p(s))}function e(t){var s=g(l(t));if(s.s===0){s.h=360}return s}function g(u){var t={h:0,s:0,b:0};var v=Math.min(u.r,u.g,u.b);var s=Math.max(u.r,u.g,u.b);var w=s-v;t.b=s;t.s=s!==0?255*w/s:0;if(t.s!==0){if(u.r===s){t.h=(u.g-u.b)/w}else{if(u.g===s){t.h=2+(u.b-u.r)/w}else{t.h=4+(u.r-u.g)/w}}}else{t.h=-1}t.h*=60;if(t.h<0){t.h+=360}t.s*=100/255;t.b*=100/255;return t}function l(s){s=parseInt(((s.indexOf("#")>-1)?s.substring(1):s),16);return{r:s>>16,g:(s&65280)>>8,b:(s&255)}}f(window).on("load",function(){f.minicolors.init();f(document).on("mousedown touchstart",function(s){if(!f(s.target).parents().add(s.target).hasClass("minicolors")){i()}}).on("mousedown touchstart",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(s){var t=f(this);s.preventDefault();f(document).data("minicolors-target",t);m(t,s,true)}).on("mousemove touchmove",function(s){var t=f(document).data("minicolors-target");if(t){m(t,s)}}).on("mouseup touchend",function(){f(this).removeData("minicolors-target")}).on("mousedown touchstart",".minicolors-swatch",function(t){var s=f(this).parent().find("INPUT"),u=s.parent();if(u.hasClass("minicolors-focus")){i(s)}else{q(s)}}).on("focus","INPUT[data-type=minicolors]",function(t){var s=f(this);if(!s.data("initialized")){return}q(s)}).on("blur","INPUT[data-type=minicolors]",function(t){var s=f(this);if(!s.data("initialized")){return}s.val(j(o(s.val()!==""?s.val():j(o(s.attr("data-default"),true)),true)));i(s)}).on("keydown","INPUT[data-type=minicolors]",function(t){var s=f(this);if(!s.data("initialized")){return}switch(t.keyCode){case 9:i();break;case 27:i();s.blur();break}}).on("keyup","INPUT[data-type=minicolors]",function(t){var s=f(this);if(!s.data("initialized")){return}b(s,true)}).on("paste","INPUT[data-type=minicolors]",function(t){var s=f(this);if(!s.data("initialized")){return}setTimeout(function(){b(s,true)},1)})})})(jQuery)};